(this["webpackJsonpreact_people-table"]=this["webpackJsonpreact_people-table"]||[]).push([[0],{24:function(e,a,t){e.exports=t(34)},29:function(e,a,t){},34:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),c=t(21),l=t.n(c),s=t(6),o=t(1),m=(t(29),t(16)),p=t(17),u=t(11),i=t(13),b=t.n(i),h=t(22),_=t.n(h),E=function(){return fetch("https://mate-academy.github.io/react_people-table/api/people.json").then((function(e){return e.json()}))},f=function(e){var a=e.currentPerson,t=Object(n.useState)([]),c=Object(u.a)(t,2),l=c[0],i=c[1];Object(n.useEffect)((function(){E().then((function(e){return i(e.map((function(e,a){return Object(p.a)(Object(p.a)({},e),{},{id:a+1})})))}))}),[]);var h=Object(o.g)(),f=Object(o.h)(),N=new URLSearchParams(f.search),d=N.get("query")||"",v=Object(n.useState)(d),g=Object(u.a)(v,2),O=g[0],j=g[1],y=Object(n.useCallback)(_()((function(e){h.push({search:e})}),1e3),[]),k=Object(n.useMemo)((function(){return l.filter((function(e){return(e.name+e.fatherName+e.motherName).toLowerCase().includes(d.toLowerCase())}))}),[l,d]);Object(n.useEffect)((function(){j(d)}),[d]);var x=N.get("sortBy")||"",C=Object(n.useState)(Object(m.a)(l)),w=Object(u.a)(C,2),P=w[0],S=w[1];Object(n.useEffect)((function(){S(Object(m.a)(k))}),[k]),Object(n.useMemo)((function(){switch(x){case"id":case"died":case"born":P.sort((function(e,a){return e[x]-a[x]}));break;case"name":case"sex":case"fatherName":case"motherName":P.sort((function(e,a){return e[x].localeCompare(a[x])}))}}),[P,x]);return r.a.createElement("div",{className:"page"},r.a.createElement("h2",{className:"page__title"},"People page"),r.a.createElement("input",{type:"text",value:O,placeholder:"Type to search people",onChange:function(e){var a=e.target.value;j(a),N.set("query",a),(N.get("query")||"").trim()||N.delete("query"),y(N.toString())},className:"searh-input"}),r.a.createElement("table",{className:"people-table"},r.a.createElement("thead",{className:"people-table__prop"},r.a.createElement("tr",null,["Name","Sex","Born","Died","Mother","Father"].map((function(e){return r.a.createElement("th",{className:"people-table__prop",key:e,onClick:function(){return function(e){N.get("sortBy")===e&&"asc"===N.get("sortOrder")?(N.set("sortOrder","desc"),P.reverse()):(N.set("sortOrder","asc"),P.reverse()),N.set("sortBy",e),h.push({search:N.toString()})}(e)}},e,x===e&&"*")})))),r.a.createElement("tbody",{className:"people-table__prop"},P.map((function(e){return r.a.createElement("tr",{key:e.id,onClick:function(){return a=e.slug,void h.push({pathname:"/people/".concat(a),search:N.toString()});var a}},r.a.createElement("td",{className:"people-table__prop"},r.a.createElement(s.b,{className:b()({person:!0,person__active:a===e.slug}),to:"/people/".concat(e.slug)},e.name)),r.a.createElement("td",{className:b()({person__woman:"f"===e.sex,person__man:"m"===e.sex})},e.sex),r.a.createElement("td",{className:"people-table__prop"},e.born),r.a.createElement("td",{className:"people-table__prop"},e.died),r.a.createElement("td",{className:"people-table__prop"},r.a.createElement(s.b,{to:"/people/:".concat(e.slug),className:"person"},e.motherName)),r.a.createElement("td",{className:"people-table__prop"},r.a.createElement(s.b,{to:"/people/:".concat(e.slug),className:"person"},e.fatherName)))})))))},N=function(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"header"},r.a.createElement("h1",{className:"header__title"},"Tabs with router"),r.a.createElement("nav",{className:"nav"},r.a.createElement("ul",{className:"nav__list"},r.a.createElement("li",{className:"nav__item"},r.a.createElement(s.c,{className:"nav__link",to:"/",exact:!0,activeClassName:"nav__link--active"},"HomePage")),r.a.createElement("li",{className:"nav__item"},r.a.createElement(s.c,{className:"nav__link",to:"/people",activeClassName:"nav__link--active"},"PeoplePage"))))),r.a.createElement(o.d,null,r.a.createElement(o.b,{path:"/",exact:!0},r.a.createElement("div",{className:"page"},r.a.createElement("h2",{className:"page__title"},"Home page"))),r.a.createElement(o.b,{path:"/people/:personName?",render:function(e){var a=e.match;return r.a.createElement(f,{currentPerson:a.params.personName})}}),r.a.createElement(o.a,{from:"/home",to:"/"}),r.a.createElement(o.b,null,r.a.createElement("h1",null,"Page not found"))))};l.a.render(r.a.createElement(s.a,null,r.a.createElement(N,null)),document.getElementById("root"))}},[[24,1,2]]]);
//# sourceMappingURL=main.59013a45.chunk.js.map